--- fptools/mk/target.mk~	Mon Aug  7 18:00:59 2000
+++ fptools/mk/target.mk	Sat Nov 18 23:48:17 2000
@@ -607,10 +607,10 @@
 # on perl.
 #
 $(SCRIPT_LINK) : $(SCRIPT_PROG)
-	@if ( $(PERL) -e '$$fn="$(SCRIPT_LINK)"; exit ((! -f $$fn || -l $$fn) ? 0 : 1);' ); then \
+	@if ( $(PERL) -e '$$fn="$(DESTDIR)$(SCRIPT_LINK)"; exit ((! -f $$fn || -l $$fn) ? 0 : 1);' ); then \
 	   echo "Creating a symbolic link from $(SCRIPT_PROG) to $(SCRIPT_LINK)"; \
-	   $(RM) $(SCRIPT_LINK); \
-	   $(LN_S) $(SCRIPT_PROG) $(SCRIPT_LINK); \
+	   $(RM) $(DESTDIR)$(SCRIPT_LINK); \
+	   $(LN_S) $(SCRIPT_PROG) $(DESTDIR)$(SCRIPT_LINK); \
 	 else \
 	   echo "Creating a symbolic link from $(SCRIPT_PROG) to $(SCRIPT_LINK) failed: \`$(SCRIPT_LINK)' already exists"; \
 	   echo "Perhaps remove \`$(SCRIPT_LINK)' manually?"; \
@@ -656,10 +656,10 @@
 # from the installation itself.
 #
 install-dirs ::
-	@$(INSTALL_DIR) $(bindir)
-	@$(INSTALL_DIR) $(libdir)
-	@$(INSTALL_DIR) $(libexecdir)
-	@$(INSTALL_DIR) $(datadir)
+	@$(INSTALL_DIR) $(DESTDIR)$(bindir)
+	@$(INSTALL_DIR) $(DESTDIR)$(libdir)
+	@$(INSTALL_DIR) $(DESTDIR)$(libexecdir)
+	@$(INSTALL_DIR) $(DESTDIR)$(datadir)
 
 # Better do this first...
 # but we won't for the moment, do it on-demand from
@@ -686,10 +686,10 @@
 INSTALL_PROGS := $(foreach p, $(INSTALL_PROGS), $(addsuffix $(subst _,,$(subst __,$(exeext),_$(suffix $(p))_)), $(basename $(p))))
 
 install:: $(INSTALL_PROGS)
-	@$(INSTALL_DIR) $(bindir)
+	@$(INSTALL_DIR) $(DESTDIR)$(bindir)
 	@for i in $(INSTALL_PROGS); do \
-		    echo $(INSTALL_PROGRAM) $(INSTALL_BIN_OPTS) $$i $(bindir); \
-		    $(INSTALL_PROGRAM) $(INSTALL_BIN_OPTS) $$i $(bindir) ;  \
+		    echo $(INSTALL_PROGRAM) $(INSTALL_BIN_OPTS) $$i $(DESTDIR)$(bindir); \
+		    $(INSTALL_PROGRAM) $(INSTALL_BIN_OPTS) $$i $(DESTDIR)$(bindir) ;  \
 	done
 endif
 
@@ -699,40 +699,40 @@
 #
 ifneq "$(INSTALL_SCRIPTS)" ""
 install:: $(INSTALL_SCRIPTS)
-	@$(INSTALL_DIR) $(bindir)
+	@$(INSTALL_DIR) $(DESTDIR)$(bindir)
 	for i in $(INSTALL_SCRIPTS); do \
-		$(INSTALL_SCRIPT) $(INSTALL_OPTS) $$i $(bindir); \
+		$(INSTALL_SCRIPT) $(INSTALL_OPTS) $$i $(DESTDIR)$(bindir); \
 	done
 endif
 
 ifneq "$(INSTALL_LIB_SCRIPTS)" ""
 install:: $(INSTALL_LIB_SCRIPTS)
-	@$(INSTALL_DIR) $(libdir)
+	@$(INSTALL_DIR) $(DESTDIR)$(libdir)
 	for i in $(INSTALL_LIB_SCRIPTS); do \
-		$(INSTALL_SCRIPT) $(INSTALL_OPTS) $$i $(libdir); \
+		$(INSTALL_SCRIPT) $(INSTALL_OPTS) $$i $(DESTDIR)$(libdir); \
 	done
 endif
 
 ifneq "$(INSTALL_LIBEXEC_SCRIPTS)" ""
 install:: $(INSTALL_LIBEXEC_SCRIPTS)
-	@$(INSTALL_DIR) $(libexecdir)
+	@$(INSTALL_DIR) $(DESTDIR)$(libexecdir)
 	for i in $(INSTALL_LIBEXEC_SCRIPTS); do \
-		$(INSTALL_SCRIPT) $(INSTALL_OPTS) $$i $(libexecdir); \
+		$(INSTALL_SCRIPT) $(INSTALL_OPTS) $$i $(DESTDIR)$(libexecdir); \
 	done
 endif
 
 ifneq "$(INSTALL_LIBS)" ""
 install:: $(INSTALL_LIBS)
-	@$(INSTALL_DIR) $(libdir)
+	@$(INSTALL_DIR) $(DESTDIR)$(libdir)
 	for i in $(INSTALL_LIBS); do \
 		case $$i in \
 		  *.a) \
-		    $(INSTALL_DATA) $(INSTALL_OPTS) $$i $(libdir); \
-		    $(RANLIB) $(libdir)/`basename $$i` ;; \
+		    $(INSTALL_DATA) $(INSTALL_OPTS) $$i $(DESTDIR)$(libdir); \
+		    $(RANLIB) $(DESTDIR)$(libdir)/`basename $$i` ;; \
 		  *.dll) \
-		    $(INSTALL_DATA) -s $(INSTALL_OPTS) $$i $(libdir) ;; \
+		    $(INSTALL_DATA) -s $(INSTALL_OPTS) $$i $(DESTDIR)$(libdir) ;; \
 		  *) \
-		    $(INSTALL_DATA) $(INSTALL_OPTS) $$i $(libdir); \
+		    $(INSTALL_DATA) $(INSTALL_OPTS) $$i $(DESTDIR)$(libdir); \
 		esac; \
 	done
 endif
@@ -745,25 +745,25 @@
 INSTALL_LIBEXECS := $(foreach p, $(INSTALL_LIBEXECS), $(addsuffix $(subst _,,$(subst __,$(exeext),_$(suffix $(p))_)), $(basename $(p))))
 
 install:: $(INSTALL_LIBEXECS)
-	@$(INSTALL_DIR) $(libexecdir)
+	@$(INSTALL_DIR) $(DESTDIR)$(libexecdir)
 	-for i in $(INSTALL_LIBEXECS); do \
-		$(INSTALL_PROGRAM) $(INSTALL_BIN_OPTS) $$i $(libexecdir); \
+		$(INSTALL_PROGRAM) $(INSTALL_BIN_OPTS) $$i $(DESTDIR)$(libexecdir); \
 	done
 endif
 
 ifneq "$(INSTALL_DATAS)" ""
 install:: $(INSTALL_DATAS)
-	@$(INSTALL_DIR) $(datadir)
+	@$(INSTALL_DIR) $(DESTDIR)$(datadir)
 	for i in $(INSTALL_DATAS); do \
-		$(INSTALL_DATA) $(INSTALL_OPTS) $$i $(datadir); \
+		$(INSTALL_DATA) $(INSTALL_OPTS) $$i $(DESTDIR)$(datadir); \
 	done
 endif
 
 ifneq "$(INSTALL_INCLUDES)" ""
 install:: $(INSTALL_INCLUDES)
-	@$(INSTALL_DIR) $(includedir)
+	@$(INSTALL_DIR) $(DESTDIR)$(includedir)
 	for i in $(INSTALL_INCLUDES); do \
-		$(INSTALL_DATA) $(INSTALL_OPTS) $$i $(includedir); \
+		$(INSTALL_DATA) $(INSTALL_OPTS) $$i $(DESTDIR)$(includedir); \
 	done
 endif
 
@@ -809,10 +809,10 @@
 #
 ifneq "$(SCRIPT_LINK)" ""
 install ::
-	@if ( $(PERL) -e '$$fn="$(bindir)/$(SCRIPT_LINK)"; exit ((! -f $$fn || -l $$fn) ? 0 : 1);' ); then \
+	@if ( $(PERL) -e '$$fn="$(DESTDIR)$(bindir)/$(SCRIPT_LINK)"; exit ((! -f $$fn || -l $$fn) ? 0 : 1);' ); then \
 	   echo "Creating a symbol link from $(SCRIPT_PROG) to $(SCRIPT_LINK) in $(bindir)"; \
-	   $(RM) $(bindir)/$(SCRIPT_LINK); \
-	   $(LN_S) $(SCRIPT_PROG) $(bindir)/$(SCRIPT_LINK); \
+	   $(RM) $(DESTDIR)$(bindir)/$(SCRIPT_LINK); \
+	   $(LN_S) $(SCRIPT_PROG) $(DESTDIR)$(bindir)/$(SCRIPT_LINK); \
 	 else \
 	   echo "Creating a symbol link from $(SCRIPT_PROG) to $(SCRIPT_LINK) in $(bindir) failed: \`$(bindir)/$(SCRIPT_LINK)' already exists"; \
 	   echo "Perhaps remove \`$(bindir)/$(SCRIPT_LINK)' manually?"; \
