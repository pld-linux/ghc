--- ./mk/target.mk.org	Sun Jun 24 17:25:42 2001
+++ ./mk/target.mk	Sun Jun 24 17:31:40 2001
@@ -686,13 +686,13 @@
 # on perl.
 #
 $(LINK) : $(LINK_TARGET)
-	@if ( $(PERL) -e '$$fn="$(LINK)"; exit ((! -f $$fn || -l $$fn) ? 0 : 1);' ); then \
-	   echo "Creating a symbolic link from $(LINK_TARGET) to $(LINK)"; \
-	   $(RM) $(LINK); \
-	   $(LN_S) $(LINK_TARGET) $(LINK); \
+	@if ( $(PERL) -e '$$fn="$(DESTDIR)$(LINK)"; exit ((! -f $$fn || -l $$fn) ? 0 : 1);' ); then \
+	   echo "Creating a symbolic link from $(LINK_TARGET) to $(DESTDIR)$(LINK)"; \
+	   $(RM) $(DESTDIR)$(LINK); \
+	   $(LN_S) $(LINK_TARGET) $(DESTDIR)$(LINK); \
 	 else \
-	   echo "Creating a symbolic link from $(LINK_TARGET) to $(LINK) failed: \`$(LINK)' already exists"; \
-	   echo "Perhaps remove \`$(LINK)' manually?"; \
+	   echo "Creating a symbolic link from $(LINK_TARGET) to $(DESTDIR)$(LINK) failed: \`$(DESTDIR)$(LINK)' already exists"; \
+	   echo "Perhaps remove \`$(DESTDIR)$(LINK)' manually?"; \
 	   exit 1; \
 	 fi;
 
@@ -701,13 +701,13 @@
 # install links to script drivers.
 #
 install ::
-	@if ( $(PERL) -e '$$fn="$(bindir)/$(LINK)"; exit ((! -f $$fn || -l $$fn) ? 0 : 1);' ); then \
-	   echo "Creating a symbol link from $(LINK_TARGET) to $(LINK) in $(bindir)"; \
-	   $(RM) $(bindir)/$(LINK); \
-	   $(LN_S) $(LINK_TARGET) $(bindir)/$(LINK); \
+	@if ( $(PERL) -e '$$fn="$(DESTDIR)$(bindir)/$(LINK)"; exit ((! -f $$fn || -l $$fn) ? 0 : 1);' ); then \
+	   echo "Creating a symbol link from $(LINK_TARGET) to $(LINK) in $(DESTDIR)$(bindir)"; \
+	   $(RM) $(DESTDIR)$(bindir)/$(LINK); \
+	   $(LN_S) $(LINK_TARGET) $(DESTDIR)$(bindir)/$(LINK); \
 	 else \
-	   echo "Creating a symbol link from $(LINK_TARGET) to $(LINK) in $(bindir) failed: \`$(bindir)/$(LINK)' already exists"; \
-	   echo "Perhaps remove \`$(bindir)/$(LINK)' manually?"; \
+	   echo "Creating a symbol link from $(LINK_TARGET) to $(LINK) in $(DESTDIR)$(bindir) failed: \`$(DESTDIR)$(bindir)/$(LINK)' already exists"; \
+	   echo "Perhaps remove \`$(DESTDIR)$(bindir)/$(LINK)' manually?"; \
 	   exit 1; \
 	 fi;
 
@@ -750,10 +750,10 @@
 # from the installation itself.
 #
 install-dirs ::
-	@$(INSTALL_DIR) $(bindir)
-	@$(INSTALL_DIR) $(libdir)
-	@$(INSTALL_DIR) $(libexecdir)
-	@$(INSTALL_DIR) $(datadir)
+	@$(INSTALL_DIR) $(DESTDIR)$(bindir)
+	@$(INSTALL_DIR) $(DESTDIR)$(libdir)
+	@$(INSTALL_DIR) $(DESTDIR)$(libexecdir)
+	@$(INSTALL_DIR) $(DESTDIR)$(datadir)
 
 # Better do this first...
 # but we won't for the moment, do it on-demand from
@@ -793,7 +793,7 @@
 	@$(INSTALL_DIR) $(bindir)
 	@for i in $(INSTALL_PROGS); do \
 		    echo $(INSTALL_PROGRAM) $(INSTALL_BIN_OPTS) $$i $(bindir); \
-		    $(INSTALL_PROGRAM) $(INSTALL_BIN_OPTS) $$i $(bindir) ;  \
+		    $(INSTALL_PROGRAM) $(INSTALL_BIN_OPTS) $$i $(DESTDIR)$(bindir) ;  \
 	done
 endif
 
@@ -803,40 +803,40 @@
 #
 ifneq "$(INSTALL_SCRIPTS)" ""
 install:: $(INSTALL_SCRIPTS)
-	@$(INSTALL_DIR) $(bindir)
+	@$(INSTALL_DIR) $(DESTDIR)$(bindir)
 	for i in $(INSTALL_SCRIPTS); do \
-		$(INSTALL_SCRIPT) $(INSTALL_OPTS) $$i $(bindir); \
+		$(INSTALL_SCRIPT) $(INSTALL_OPTS) $$i $(DESTDIR)$(bindir); \
 	done
 endif
 
 ifneq "$(INSTALL_LIB_SCRIPTS)" ""
 install:: $(INSTALL_LIB_SCRIPTS)
-	@$(INSTALL_DIR) $(libdir)
+	@$(INSTALL_DIR) $(DESTDIR)$(libdir)
 	for i in $(INSTALL_LIB_SCRIPTS); do \
-		$(INSTALL_SCRIPT) $(INSTALL_OPTS) $$i $(libdir); \
+		$(INSTALL_SCRIPT) $(INSTALL_OPTS) $$i $(DESTDIR)$(libdir); \
 	done
 endif
 
 ifneq "$(INSTALL_LIBEXEC_SCRIPTS)" ""
 install:: $(INSTALL_LIBEXEC_SCRIPTS)
-	@$(INSTALL_DIR) $(libexecdir)
+	@$(INSTALL_DIR) $(DESTDIR)$(libexecdir)
 	for i in $(INSTALL_LIBEXEC_SCRIPTS); do \
-		$(INSTALL_SCRIPT) $(INSTALL_OPTS) $$i $(libexecdir); \
+		$(INSTALL_SCRIPT) $(INSTALL_OPTS) $$i $(DESTDIR)$(libexecdir); \
 	done
 endif
 
 ifneq "$(INSTALL_LIBS)" ""
 install:: $(INSTALL_LIBS)
-	@$(INSTALL_DIR) $(libdir)
+	@$(INSTALL_DIR) $(DESTDIR)$(libdir)
 	for i in $(INSTALL_LIBS); do \
 		case $$i in \
 		  *.a) \
-		    $(INSTALL_DATA) $(INSTALL_OPTS) $$i $(libdir); \
-		    $(RANLIB) $(libdir)/`basename $$i` ;; \
+		    $(INSTALL_DATA) $(INSTALL_OPTS) $$i $(DESTDIR)$(libdir); \
+		    $(RANLIB) $(DESTDIR)$(libdir)/`basename $$i` ;; \
 		  *.dll) \
-		    $(INSTALL_DATA) -s $(INSTALL_OPTS) $$i $(libdir) ;; \
+		    $(INSTALL_DATA) -s $(INSTALL_OPTS) $$i $(DESTDIR)$(libdir) ;; \
 		  *) \
-		    $(INSTALL_DATA) $(INSTALL_OPTS) $$i $(libdir); \
+		    $(INSTALL_DATA) $(INSTALL_OPTS) $$i $(DESTDIR)$(libdir); \
 		esac; \
 	done
 endif
@@ -849,25 +849,25 @@
 INSTALL_LIBEXECS := $(foreach p, $(INSTALL_LIBEXECS), $(addsuffix $(subst _,,$(subst __,$(exeext),_$(suffix $(p))_)), $(basename $(p))))
 
 install:: $(INSTALL_LIBEXECS)
-	@$(INSTALL_DIR) $(libexecdir)
+	@$(INSTALL_DIR) $(DESTDIR)$(libexecdir)
 	-for i in $(INSTALL_LIBEXECS); do \
-		$(INSTALL_PROGRAM) $(INSTALL_BIN_OPTS) $$i $(libexecdir); \
+		$(INSTALL_PROGRAM) $(INSTALL_BIN_OPTS) $$i $(DESTDIR)$(libexecdir); \
 	done
 endif
 
 ifneq "$(INSTALL_DATAS)" ""
 install:: $(INSTALL_DATAS)
-	@$(INSTALL_DIR) $(datadir)
+	@$(INSTALL_DIR) $(DESTDIR)$(datadir)
 	for i in $(INSTALL_DATAS); do \
-		$(INSTALL_DATA) $(INSTALL_OPTS) $$i $(datadir); \
+		$(INSTALL_DATA) $(INSTALL_OPTS) $$i $(DESTDIR)$(datadir); \
 	done
 endif
 
 ifneq "$(INSTALL_INCLUDES)" ""
 install:: $(INSTALL_INCLUDES)
-	@$(INSTALL_DIR) $(includedir)
+	@$(INSTALL_DIR) $(DESTDIR)$(includedir)
 	for i in $(INSTALL_INCLUDES); do \
-		$(INSTALL_DATA) $(INSTALL_OPTS) $$i $(includedir); \
+		$(INSTALL_DATA) $(INSTALL_OPTS) $$i $(DESTDIR)$(includedir); \
 	done
 endif
 
@@ -877,26 +877,26 @@
 uninstall:: 
 	@for i in $(INSTALL_PROGS) "" ; do			\
 	  if test "$$i"; then 					\
-		echo rm -f $(bindir)/`basename $$i`;		\
-		rm -f $(bindir)/`basename $$i`;			\
+		echo rm -f $(DESTDIR)$(bindir)/`basename $$i`;		\
+		rm -f $(DESTDIR)$(bindir)/`basename $$i`;			\
 	  fi; 							\
 	done
 	@for i in $(INSTALL_LIBS) ""; do			\
 	  if test "$$i"; then 					\
-		echo rm -f $(libdir)/`basename $$i`;		\
-		rm -f $(libdir)/`basename $$i`;			\
+		echo rm -f $(DESTDIR)$(libdir)/`basename $$i`;		\
+		rm -f $(DESTDIR)$(libdir)/`basename $$i`;			\
 	  fi;							\
 	done
 	@for i in $(INSTALL_LIBEXECS) ""; do			\
 	  if test "$$i"; then 					\
-		echo rm -f $(libexecdir)/`basename $$i`;	\
-		rm -f $(libexecdir)/`basename $$i`;		\
+		echo rm -f $(DESTDIR)$(libexecdir)/`basename $$i`;	\
+		rm -f $(DESTDIR)$(libexecdir)/`basename $$i`;		\
 	  fi;							\
 	done
 	@for i in $(INSTALL_DATAS) ""; do			\
 	  if test "$$i"; then 					\
-		echo rm -f $(datadir)/`basename $$i`;		\
-		rm -f $(datadir)/`basename $$i`;		\
+		echo rm -f $(DESTDIR)$(datadir)/`basename $$i`;		\
+		rm -f $(DESTDIR)$(datadir)/`basename $$i`;		\
 	  fi;							\
 	done
 
